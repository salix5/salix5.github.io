<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>時代的印記</title>
</head>
<body>
<input type="text" id="text1" readonly>
<button type="button" onclick="mark_of_time()">複製</button>
<button type="button" onclick="until_dawn()">直到黎明</button>
<div id="dawn"></div>
<script>
'use strict';
var layer = getRandomIntInclusive(1, 1000);
var r = 0;
var text = '';

var pu_quotes = [
'那還是人嗎',
'那還鼠人嗎'
];

var normal_quotes = [
'那還可以吧', 
'那還不錯嘛', 
'NZMB',
'好8我接受',
'嗯 你說得對',
'對',
'等於等於',
'好窩',
'有這種事'
];

if(layer <= 8){ 
	// pick up
	r = getRandomIntInclusive(0, pu_quotes.length - 1);
	text = pu_quotes[r];
}
else{
	r = getRandomIntInclusive(0, normal_quotes.length - 1);
	text = normal_quotes[r];
}

var text1 = document.getElementById('text1');
text1.value = text;

function getRandomIntInclusive(min, max) {
    const randomBuffer = new Uint32Array(1);
	min = Math.ceil(min);
	max = Math.floor(max);
	
	if(min == max)
		return min;
	
	window.crypto.getRandomValues(randomBuffer);
	let randomNumber = randomBuffer[0] / (0xffffffff + 1);
	return Math.floor(randomNumber * (max - min + 1)) + min;
}

function mark_of_time(){
	text1.select();
	document.execCommand("copy");
}

function until_dawn(){
	var stone = 0;
	do{
		++stone;
		layer = getRandomIntInclusive(1, 1000);
	}while(layer > 8);
	
	var text1 = document.getElementById('text1');
	r = getRandomIntInclusive(0, pu_quotes.length - 1);
	text1.value = pu_quotes[r];
	document.getElementById("dawn").innerHTML = document.getElementById("dawn").innerHTML + '總共抽了' + stone + '次！<br>';
}
</script>
</body>
</html>
