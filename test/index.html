<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="author" content="salix5">
	<title>æ™‚ä»£çš„å°è¨˜</title>
	<style>
	</style>
</head>
<body>
è™å¹´Pick Upæ´»å‹•é€²è¡Œä¸­ï¼<br>
<input type="text" id="text1" size="30" readonly>
<button type="button" onclick="mark_of_time()">è¤‡è£½</button>
<button type="button" onclick="until_dawn()">ç›´åˆ°é»æ˜</button>
<div id="dawn"></div>
<script>
'use strict';
var layer = 0;

var pu_quotes = [
'é‚£é‚„æ˜¯ğŸ¯å—'
];

var ssr_quotes = [
'é‚£é‚„æ˜¯äººå—'
];

var normal_quotes = [
'é‚£é‚„å¯ä»¥å§', 
'é‚£é‚„ä¸éŒ¯å˜›', 
'NZMB',
'å¥½8æˆ‘æ¥å—',
'å—¯ ä½ èªªå¾—å°',
'å°',
'ç­‰æ–¼ç­‰æ–¼',
'å¥½çª©',
'æœ‰é€™ç¨®äº‹',
'é‚£æ ¹æœ¬å°±ä¸å¯èƒ½ï¼',
'(èºº',
'è©²ä¸‹è¼‰äº†8',
'è©²é€€å‘äº†å§',
];
	
var new_year_quotes = [
	'å¹´çµ‚çé‡‘å¹¾å€‹æœˆå•Šï¼Ÿ',
	'ç¾åœ¨è–ªæ°´å¤ ç”¨å—ï¼Ÿ',
	'åœ¨å“ªè£¡ä¸Šç­å•Šï¼Ÿ',
	'æ‰“ç®—ä»€éº¼æ™‚å€™çµå©šï¼Ÿ',
	'æœ‰æ²’æœ‰æ­£åœ¨äº¤å¾€çš„å°è±¡å•Šï¼Ÿ',
];

var text1 = document.getElementById('text1');
var div_dawn = document.getElementById('dawn');
var is_pu =true;

function get_text(layer){
	var r = 0;
	var text = '';
	if(1<= layer && layer <= 8){ 
		// pick up
		r = getRandomInt(0, pu_quotes.length - 1);
		text = pu_quotes[r];
	}
	else if(is_pu && 9 <= layer && layer <= 10){
		r = getRandomInt(0, ssr_quotes.length - 1);
		text = ssr_quotes[r];
	}
	else{
		r = getRandomInt(0, normal_quotes.length - 1);
		text = normal_quotes[r];
		if(r == 8){
			div_dawn.innerHTML = 'To absent friend.<br>';
		}
	}
	return text;
}

function getRandomInt(min, max) {
	min = Math.ceil(min);
	max = Math.floor(max);
	if(min == max)
		return min;
	
	let range = max - min + 1;
	let secureMax = 0xffffffff - 0xffffffff % range;
	let randomBuffer = new Uint32Array(1);
	do {
		window.crypto.getRandomValues(randomBuffer);
	} while (randomBuffer[0] >= secureMax);
	return min + randomBuffer[0] % range;
}

function mark_of_time(){
	text1.select();
	document.execCommand("copy");
}

function until_dawn(){
	var times = 0;
	
	do{
		++times;
		layer = getRandomInt(1, 1000);
	}while(layer > 8);
	
	text1.value = get_text(layer);
	div_dawn.innerHTML +=  `ç¸½å…±æŠ½äº†${times}æ¬¡ï¼<br>`;
}

layer = getRandomInt(1, 1000);
text1.value = get_text(layer);

</script>
</body>
</html>
