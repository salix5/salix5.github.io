<script src="query.js"></script>
<script>
var qstr = 'SELECT id, alias, type FROM datas';
var stmt = db.prepare(qstr);
var id_list = [];
var url_table = new Object();

while(stmt.step()) {
    var row = stmt.getAsObject();
    if(is_virtual(row))
	continue;
    id_list.push(row.id);
}
for(var i = 0; i < id_list.length; ++i){
	/*var xhr = new XMLHttpRequest();
	xhr.open('GET', 'https://yugipedia.com/wiki/' + id_list[i].toString().padStart(8, '0'), true);	
	xhr.onload = e => {
		var ureg = /https\:\/\/www\.db\.yugioh\-card\.com\/yugiohdb\/card_search\.action\?ope\=2&amp;cid\=\d*&amp;request_locale\=ja/;
		var url = ureg.exec(xhr.responseText);
		url_table[id_list[i]] = url;
		document.write(url);
	};
	*/
	document.write(id_list[i]);
}
</script>
